{"version":3,"sources":["webpack:///./modules/query.ts"],"names":[],"mappings":"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","file":"0.11926d9addcf54e13441.hot-update.js","sourcesContent":["import { mergeDeep } from 'immutable'\n\nconst testData = { message: 'hello' }\n\nexport const controllers = {\n  async createOne(model: any, body: any) {\n    try {\n      return await model.create(body)\n    } catch {\n      return { error: 'duplicate - already exists' }\n    }\n  },\n  updateOne(docToUpdate: any, update: any) {\n    const updatedDocument = mergeDeep(docToUpdate, update)\n    return updatedDocument.save()\n  },\n  deleteOne(docToDelete: any) {\n    return docToDelete.remove()\n  },\n  getOne(docToGet: any) {\n    return Promise.resolve(docToGet)\n  },\n  getAll(model: any) {\n    return model.find({}).exec()\n  },\n  findByParam(model: any, id: any) {\n    return model.findById(id).exec()\n  }\n}\n\nfunction getAll(model: any) {\n  return function(req: any, res: any, next: any) {\n    controllers\n      .getAll(model)\n      .then((result: any) => res.json(result))\n      .catch((err: any) => res.status(504).send('Something went wrong'))\n  }\n}\n\nfunction getOne(model: any) {\n  return function(req: any, res: any) {\n    return controllers\n      .getOne(req.body)\n      .then(result => res.status(200).json(result))\n      .catch(err => res.status(504).send('Something went wrong'))\n  }\n}\n\nfunction createOne(model: any) {\n  return function(req: any, res: any, next: any) {\n    return controllers\n      .createOne(model, req.body)\n      .then((doc: any) => res.status(201).json(doc))\n      .catch((err: any) => next(err))\n  }\n}\n\nfunction updateOne(model: any) {\n  return function(req: any, res: any, next: any) {\n    const docToUpdate = req.docFromId\n    const update = req.body\n\n    return controllers\n      .updateOne(docToUpdate, update)\n      .then((doc: any) => res.status(201).json(doc))\n      .catch((err: any) => next(err))\n  }\n}\n\nfunction deleteOne(model: any) {\n  return function(req: any, res: any, next: any) {\n    return controllers\n      .deleteOne(req.body)\n      .then((result: any) => {\n        res.status(201).json(result)\n      })\n      .then((err: any) => {\n        next(err)\n      })\n  }\n}\n\nfunction findByParam(model: any) {\n  return function(req: any, res: any, next: any, id: any) {\n    return controllers\n      .findByParam(model, id)\n      .then((doc: any) => {\n        if (!doc) {\n          next(new Error('Not Found Error'))\n        } else {\n          req.docFromId = doc\n          next()\n        }\n      })\n      .catch((err: any) => {\n        next(err)\n      })\n  }\n}\n\nfunction generateControllers(model: any): Object {\n  return {\n    getAll: getAll(model),\n    getOne: getOne(model),\n    createOne: createOne(model),\n    deleteOne: deleteOne(model),\n    findByParam: findByParam(model)\n  }\n}\nexport default generateControllers\n\n\n\n// WEBPACK FOOTER //\n// ./modules/query.ts"],"sourceRoot":""}